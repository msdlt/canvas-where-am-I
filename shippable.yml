language: node_js

node_js:
  - 14.10.1

# PR branches will be built as PRs.
branches:
  only:
    - master

env:
    - secure: IWSsTa4AxoUCmgaThCkzIrNHrO1VeV1bbQBvIWY0eBnETnUzWZMiWx2VmT3RT8c083sjaAWu6vvcjiTACfB9eFy2/aWN50QfBaESRWNA/qphll0a10NU73SIoIpOju5y64JINM97ASYfFbGZP9BJ6THXPjGYuGpJnHq0K6MR2V5B1vwcAhuMBtS3DUWkCOGmUF1uOKvjQ4iveogBFig1oRY2XmD37FuGlLuwf7QyQ1sN77YiqoOZzeuV4bamGSgEYAsOlRSw2KFETmu5u7w8HzMYlJp6ksZHPQ29BqZ3xy3x+BrXRQNa43tHzjKp0Co506klaMwR5l/vf/sQtFG98A==
build:
  cache: true
  env:
    # Set environment variable for test results output
    - XUNIT_FILE=shippable/testresults/result.xml
  cache_dir_list:
    - $SHIPPABLE_BUILD_DIR/node_modules
  ci:
    - npm install
    - npm test

integrations:
  notifications:
    - integrationName: email
      type: email
      recipients:
        - miguel.pellicer@ctl.ox.ac.uk
        # Replace Miguel by Oxford staff, ask Matthew about adding him or a different contact for Shippable notifications.
      on_success: change
      on_failure: change
      on_cancel: change
      on_start: never
      on_pull_request: never
  generic:
    - integrationName: canvas-where-am-i-github
resources:
  - name: course-presentation-navigation-repo
    type: gitRepo
    integration: github
    pointer:
      sourceName: oxctl/canvas-where-am-i
      branch: master

